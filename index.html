<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario con AJAx</title>
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>
<body class="bg-secondary text-white">

<div class="content" style=" padding: 20px;">
  <h2>Formulario de Contacto</h2>


  <form id="contactForm" >//action="http://localhost:3000/contacto" method="POST"
    <label for="nombre" class="form-label">Nombre:</label>
    <input class="form-control" type="text" id="nombre" name="nombre" required><br><br>

    <label for="email" class="form-label">Correo:</label>
    <input class="form-control" type="email" id="email" name="email" required><br><br>

    <label for="mensaje" class="form-label">Mensaje:</label><br>
    <textarea id="mensaje" class="form-control" id="exampleFormControlTextarea1" rows="4"></textarea>
    <br>
    <button class="btn btn-primary mb-3" type="submit">Enviar</button>
  </form>

  <p id="respuesta"></p>
    </div>

  <script>
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault(); // Evita el envío tradicional

      const data = {
        nombre: document.getElementById('nombre').value,
        email: document.getElementById('email').value,
        mensaje: document.getElementById('mensaje').value
      };

      fetch('http://localhost:3000/contacto', { // <-- Cambia la URL a tu backend
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => {
        if (!response.ok) throw new Error('Error en la respuesta');
        return response.json();
      })
      .then(json => {
        document.getElementById('respuesta').innerText = 'Mensaje enviado correctamente ✅';
        console.log('Respuesta del backend:', json);
      })
      .catch(err => {
        document.getElementById('respuesta').innerText = 'Hubo un error ❌';
        console.error('Error al enviar:', err);
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>


    <footer class="text-center mt-5 py-3 bg-dark">
        <p>&copy; @dewcry </p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
